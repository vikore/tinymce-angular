/*!
 * Tiny Link Checker plugin
 *
 * Copyright 2010-2021 Tiny Technologies, Inc.  All rights reserved.
 *
 * Version: 2.1.0-100
 */
!function(d){"use strict";var n,t,e,r,o,u,p=function(n){var t=n,e=function(){return t};return{get:e,set:function(n){t=n},clone:function(){return p(e())}}},i=function(n){return parseInt(n,10)},c=function(n,t){var e=n-t;return 0===e?0:0<e?1:-1},a=function(n,t,e){return{major:n,minor:t,patch:e}},f=function(n){var t=/([0-9]+)\.([0-9]+)\.([0-9]+)(?:(\-.+)?)/.exec(n);return t?a(i(t[1]),i(t[2]),i(t[3])):a(0,0,0)},m=function(n,t){return!!n&&-1===function(n,t){var e=c(n.major,t.major);if(0!==e)return e;var r=c(n.minor,t.minor);if(0!==r)return r;var o=c(n.patch,t.patch);return 0!==o?o:0}(f([(e=n).majorVersion,e.minorVersion].join(".").split(".").slice(0,3).join(".")),f(t));var e},s=function(r,o){return function(){for(var n=[],t=0;t<arguments.length;t++)n[t]=arguments[t];var e=r.console;e&&o in e&&e[o].apply(e,arguments)}},h={log:s(d.window,"log"),error:s(d.window,"error"),warn:s(d.window,"warm")},l=function(){},v=function(e,r){return function(){for(var n=[],t=0;t<arguments.length;t++)n[t]=arguments[t];return e(r.apply(null,n))}},g=function(n){return function(){return n}},y=function(n){return n},w=g(!1),k=g(!0),T=function(n){return n.getParam("linkchecker_service_url",void 0,"string")},b=function(t,e){var r,n;return(n=function(){var n=arguments;d.clearTimeout(r),r=d.setTimeout(function(){t.apply(this,n)},e)}).stop=function(){d.clearTimeout(r)},n},x=function(){return O},O=(n=function(n){return n.isNone()},r={fold:function(n,t){return n()},is:w,isSome:w,isNone:k,getOr:e=function(n){return n},getOrThunk:t=function(n){return n()},getOrDie:function(n){throw new Error(n||"error: getOrDie called on none.")},getOrNull:g(null),getOrUndefined:g(void 0),or:e,orThunk:t,map:x,each:l,bind:x,exists:w,forall:k,filter:x,equals:n,equals_:n,toArray:function(){return[]},toString:g("none()")},Object.freeze&&Object.freeze(r),r),_=function(e){var n=g(e),t=function(){return o},r=function(n){return n(e)},o={fold:function(n,t){return t(e)},is:function(n){return e===n},isSome:k,isNone:w,getOr:n,getOrThunk:n,getOrDie:n,getOrNull:n,getOrUndefined:n,or:t,orThunk:t,map:function(n){return _(n(e))},each:function(n){n(e)},bind:r,exists:r,forall:r,filter:function(n){return n(e)?o:O},toArray:function(){return[e]},toString:function(){return"some("+e+")"},equals:function(n){return n.is(e)},equals_:function(n,t){return n.fold(w,function(n){return t(e,n)})}};return o},E={some:_,none:x,from:function(n){return null==n?O:_(n)}},j=Object.keys,A=Object.hasOwnProperty,R=function(n,t){for(var e=j(n),r=0,o=e.length;r<o;r++){var u=e[r];t(n[u],u)}},S=function(n,e){return F(n,function(n,t){return{k:t,v:e(n,t)}})},F=function(n,r){var o={};return R(n,function(n,t){var e=r(n,t);o[e.k]=e.v}),o},C=function(n,e){var r=[];return R(n,function(n,t){r.push(e(n,t))}),r},I=function(n,t){return P(n,t)?E.from(n[t]):E.none()},P=function(n,t){return A.call(n,t)},D=function(t){return function(n){return function(n){if(null===n)return"null";var t=typeof n;return"object"===t&&(Array.prototype.isPrototypeOf(n)||n.constructor&&"Array"===n.constructor.name)?"array":"object"===t&&(String.prototype.isPrototypeOf(n)||n.constructor&&"String"===n.constructor.name)?"string":t}(n)===t}},N=D("object"),L=D("array"),M=D("boolean"),U=D("function"),B=Array.prototype.slice,q=Array.prototype.indexOf,J=Array.prototype.push,V=function(n,t){return e=n,r=t,-1<q.call(e,r);var e,r},H=function(n,t){for(var e=n.length,r=new Array(e),o=0;o<e;o++){var u=n[o];r[o]=t(u,o)}return r},W=function(n,t){for(var e=0,r=n.length;e<r;e++){t(n[e],e)}},z=function(n,t,e){return W(n,function(n){e=t(e,n)}),e},$=function(n){for(var t=[],e=0,r=n.length;e<r;++e){if(!L(n[e]))throw new Error("Arr.flatten item "+e+" was not an array, input: "+n);J.apply(t,n[e])}return t},Y=(U(Array.from)&&Array.from,function(e){return{is:function(n){return e===n},isValue:k,isError:w,getOr:g(e),getOrThunk:g(e),getOrDie:g(e),or:function(n){return Y(e)},orThunk:function(n){return Y(e)},fold:function(n,t){return t(e)},map:function(n){return Y(n(e))},mapError:function(n){return Y(e)},each:function(n){n(e)},bind:function(n){return n(e)},exists:function(n){return n(e)},forall:function(n){return n(e)},toOption:function(){return E.some(e)}}}),K=function(e){return{is:w,isValue:w,isError:k,getOr:y,getOrThunk:function(n){return n()},getOrDie:function(){return n=String(e),function(){throw new Error(n)}();var n},or:function(n){return n},orThunk:function(n){return n()},fold:function(n,t){return n(e)},map:function(n){return K(e)},mapError:function(n){return K(n(e))},each:l,bind:function(n){return K(e)},exists:w,forall:k,toOption:E.none}},X={value:Y,error:K,fromOption:function(n,t){return n.fold(function(){return K(t)},Y)}};(u=o||(o={}))[u.Error=0]="Error",u[u.Value=1]="Value";var G,Q,Z,nn=function(n,t,e){return n.stype===o.Error?t(n.serror):e(n.svalue)},tn=function(n){return{stype:o.Value,svalue:n}},en=function(n){return{stype:o.Error,serror:n}},rn=function(n){return nn(n,X.error,X.value)},on=tn,un=function(n){var t=[],e=[];return W(n,function(n){nn(n,function(n){return e.push(n)},function(n){return t.push(n)})}),{values:t,errors:e}},cn=en,an=function(n,t){return n.stype===o.Value?t(n.svalue):n},fn=function(n,t){return n.stype===o.Error?t(n.serror):n},sn=function(n,t){return n.stype===o.Value?{stype:o.Value,svalue:t(n.svalue)}:n},ln=function(n,t){return n.stype===o.Error?{stype:o.Error,serror:t(n.serror)}:n},dn=function(n){return N(n)&&100<j(n).length?" removed due to size":JSON.stringify(n,null,2)},pn=function(n,t){return cn([{path:n,getErrorInfo:t}])},mn=function(i){if(!L(i))throw new Error("cases must be an array");if(0===i.length)throw new Error("there must be at least one case");var c=[],e={};return W(i,function(n,r){var t=j(n);if(1!==t.length)throw new Error("one and only one name per case");var o=t[0],u=n[o];if(void 0!==e[o])throw new Error("duplicate key detected:"+o);if("cata"===o)throw new Error("cannot have a case named cata (sorry)");if(!L(u))throw new Error("case arguments must be an array");c.push(o),e[o]=function(){var n=arguments.length;if(n!==u.length)throw new Error("Wrong number of arguments to case "+o+". Expected "+u.length+" ("+u+"), got "+n);for(var e=new Array(n),t=0;t<e.length;t++)e[t]=arguments[t];return{fold:function(){if(arguments.length!==i.length)throw new Error("Wrong number of arguments to fold. Expected "+i.length+", got "+arguments.length);return arguments[r].apply(null,e)},match:function(n){var t=j(n);if(c.length!==t.length)throw new Error("Wrong number of arguments to match. Expected: "+c.join(",")+"\nActual: "+t.join(","));if(!function(n,t){for(var e=0,r=n.length;e<r;++e)if(!0!==t(n[e],e))return!1;return!0}(c,function(n){return V(t,n)}))throw new Error("Not all branches were specified when using match. Specified: "+t.join(", ")+"\nRequired: "+c.join(", "));return n[o].apply(null,e)},log:function(n){d.console.log(n,{constructors:c,constructor:o,params:e})}}}}),e},hn=Object.prototype.hasOwnProperty,vn=function(i){return function(){for(var n=new Array(arguments.length),t=0;t<n.length;t++)n[t]=arguments[t];if(0===n.length)throw new Error("Can't merge zero objects");for(var e={},r=0;r<n.length;r++){var o=n[r];for(var u in o)hn.call(o,u)&&(e[u]=i(e[u],o[u]))}return e}},gn=vn(function(n,t){return N(n)&&N(t)?gn(n,t):t}),yn=vn(function(n,t){return t}),wn=mn([{strict:[]},{defaultedThunk:["fallbackThunk"]},{asOption:[]},{asDefaultedOptionThunk:["fallbackThunk"]},{mergeWithThunk:["baseThunk"]}]),kn=wn.strict,Tn=(wn.asOption,wn.defaultedThunk,wn.asDefaultedOptionThunk,wn.mergeWithThunk,function(n,t){var e;return(e={})[n]=t,e}),bn=(mn([{bothErrors:["error1","error2"]},{firstError:["error1","value2"]},{secondError:["value1","error2"]},{bothValues:["value1","value2"]}]),function(n,t){return e=t,r={},W(n,function(n){var t=n[e];r[t]=n}),r;var e,r}),xn=function(n){return v(cn,$)(n)},On=function(n,t){var e,r,o=un(n);return 0<o.errors.length?xn(o.errors):(e=o.values,r=t,0<e.length?on(gn(r,yn.apply(void 0,e))):on(r))},_n=function(n){var t=un(n);return 0<t.errors.length?xn(t.errors):on(t.values)},En=mn([{field:["key","okey","presence","prop"]},{state:["okey","instantiator"]}]),jn=function(e,r,o){return I(r,o).fold(function(){return n=o,t=r,pn(e,function(){return'Could not find valid *strict* value for "'+n+'" in '+dn(t)});var n,t},on)},An=function(n,t,e){var r=I(n,t).fold(function(){return e(n)},y);return on(r)},Rn=function(c,a,n,f){return n.fold(function(o,e,n,r){var u=function(n){var t=r.extract(c.concat([o]),f,n);return sn(t,function(n){return Tn(e,f(n))})},i=function(n){return n.fold(function(){var n=Tn(e,f(E.none()));return on(n)},function(n){var t=r.extract(c.concat([o]),f,n);return sn(t,function(n){return Tn(e,f(E.some(n)))})})};return n.fold(function(){return an(jn(c,a,o),u)},function(n){return an(An(a,o,n),u)},function(){return an(on(I(a,o)),i)},function(n){return an((e=n,r=I(t=a,o).map(function(n){return!0===n?e(t):n}),on(r)),i);var t,e,r},function(n){var t=n(a),e=sn(An(a,o,g({})),function(n){return gn(t,n)});return an(e,u)})},function(n,t){var e=t(a);return on(Tn(n,f(e)))})},Sn=function(r){return{extract:function(e,n,t){return fn(r(t,n),function(n){return t=n,pn(e,function(){return t});var t})},toString:function(){return"val"}}},Fn=function(c){return{extract:function(n,t,e){return r=n,o=e,u=t,i=H(c,function(n){return Rn(r,o,n,u)}),On(i,{});var r,o,u,i},toString:function(){return"obj{\n"+H(c,function(n){return n.fold(function(n,t,e,r){return n+" -> "+r.toString()},function(n,t){return"state("+n+")"})}).join("\n")+"}"}}},Cn=g(Sn(on)),In=v(function(o){return{extract:function(e,r,n){var t=H(n,function(n,t){return o.extract(e.concat(["["+t+"]"]),r,n)});return _n(t)},toString:function(){return"array("+o.toString()+")"}}},Fn),Pn=(En.state,En.field),Dn=function(n,t,e){return rn((r=n,o=y,u=e,i=t.extract([r],o,u),ln(i,function(n){return{input:u,errors:n}})));var r,o,u,i},Nn=function(n,t,e){return Dn(n,t,e).fold(function(n){throw new Error(Ln(n))},y)},Ln=function(n){return"Errors: \n"+(t=n.errors,e=10<t.length?t.slice(0,10).concat([{path:[],getErrorInfo:function(){return"... (only showing first ten failures)"}}]):t,H(e,function(n){return"Failed path: ("+n.path.join(" > ")+")\n"+n.getErrorInfo()})).join("\n")+"\n\nInput object: "+dn(n.input);var t,e},Mn=function(){return(Mn=Object.assign||function(n){for(var t,e=1,r=arguments.length;e<r;e++)for(var o in t=arguments[e])Object.prototype.hasOwnProperty.call(t,o)&&(n[o]=t[o]);return n}).apply(this,arguments)},Un={},Bn={exports:Un};Q=Un,Z=Bn,G=void 0,function(n){"object"==typeof Q&&void 0!==Z?Z.exports=n():"function"==typeof G&&G.amd?G([],n):("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).EphoxContactWrapper=n()}(function(){return function u(i,c,a){function f(t,n){if(!c[t]){if(!i[t]){var e=!1;if(!n&&e)return e(t,!0);if(s)return s(t,!0);var r=new Error("Cannot find module '"+t+"'");throw r.code="MODULE_NOT_FOUND",r}var o=c[t]={exports:{}};i[t][0].call(o.exports,function(n){return f(i[t][1][n]||n)},o,o.exports,u,i,c,a)}return c[t].exports}for(var s=!1,n=0;n<a.length;n++)f(a[n]);return f}({1:[function(n,t,e){var r,o,u=t.exports={};function i(){throw new Error("setTimeout has not been defined")}function c(){throw new Error("clearTimeout has not been defined")}function a(t){if(r===setTimeout)return setTimeout(t,0);if((r===i||!r)&&setTimeout)return r=setTimeout,setTimeout(t,0);try{return r(t,0)}catch(n){try{return r.call(null,t,0)}catch(n){return r.call(this,t,0)}}}!function(){try{r="function"==typeof setTimeout?setTimeout:i}catch(n){r=i}try{o="function"==typeof clearTimeout?clearTimeout:c}catch(n){o=c}}();var f,s=[],l=!1,d=-1;function p(){l&&f&&(l=!1,f.length?s=f.concat(s):d=-1,s.length&&m())}function m(){if(!l){var n=a(p);l=!0;for(var t=s.length;t;){for(f=s,s=[];++d<t;)f&&f[d].run();d=-1,t=s.length}f=null,l=!1,function(t){if(o===clearTimeout)return clearTimeout(t);if((o===c||!o)&&clearTimeout)return o=clearTimeout,clearTimeout(t);try{o(t)}catch(n){try{return o.call(null,t)}catch(n){return o.call(this,t)}}}(n)}}function h(n,t){this.fun=n,this.array=t}function v(){}u.nextTick=function(n){var t=new Array(arguments.length-1);if(1<arguments.length)for(var e=1;e<arguments.length;e++)t[e-1]=arguments[e];s.push(new h(n,t)),1!==s.length||l||a(m)},h.prototype.run=function(){this.fun.apply(null,this.array)},u.title="browser",u.browser=!0,u.env={},u.argv=[],u.version="",u.versions={},u.on=v,u.addListener=v,u.once=v,u.off=v,u.removeListener=v,u.removeAllListeners=v,u.emit=v,u.prependListener=v,u.prependOnceListener=v,u.listeners=function(n){return[]},u.binding=function(n){throw new Error("process.binding is not supported")},u.cwd=function(){return"/"},u.chdir=function(n){throw new Error("process.chdir is not supported")},u.umask=function(){return 0}},{}],2:[function(n,l,t){(function(e){!function(n){var t=setTimeout;function r(){}function u(n){if("object"!=typeof this)throw new TypeError("Promises must be constructed via new");if("function"!=typeof n)throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],s(n,this)}function o(e,r){for(;3===e._state;)e=e._value;0!==e._state?(e._handled=!0,u._immediateFn(function(){var n=1===e._state?r.onFulfilled:r.onRejected;if(null!==n){var t;try{t=n(e._value)}catch(n){return void c(r.promise,n)}i(r.promise,t)}else(1===e._state?i:c)(r.promise,e._value)})):e._deferreds.push(r)}function i(t,n){try{if(n===t)throw new TypeError("A promise cannot be resolved with itself.");if(n&&("object"==typeof n||"function"==typeof n)){var e=n.then;if(n instanceof u)return t._state=3,t._value=n,void a(t);if("function"==typeof e)return void s((r=e,o=n,function(){r.apply(o,arguments)}),t)}t._state=1,t._value=n,a(t)}catch(n){c(t,n)}var r,o}function c(n,t){n._state=2,n._value=t,a(n)}function a(n){2===n._state&&0===n._deferreds.length&&u._immediateFn(function(){n._handled||u._unhandledRejectionFn(n._value)});for(var t=0,e=n._deferreds.length;t<e;t++)o(n,n._deferreds[t]);n._deferreds=null}function f(n,t,e){this.onFulfilled="function"==typeof n?n:null,this.onRejected="function"==typeof t?t:null,this.promise=e}function s(n,t){var e=!1;try{n(function(n){e||(e=!0,i(t,n))},function(n){e||(e=!0,c(t,n))})}catch(n){if(e)return;e=!0,c(t,n)}}u.prototype.catch=function(n){return this.then(null,n)},u.prototype.then=function(n,t){var e=new this.constructor(r);return o(this,new f(n,t,e)),e},u.all=function(n){var c=Array.prototype.slice.call(n);return new u(function(r,o){if(0===c.length)return r([]);var u=c.length;function i(t,n){try{if(n&&("object"==typeof n||"function"==typeof n)){var e=n.then;if("function"==typeof e)return void e.call(n,function(n){i(t,n)},o)}c[t]=n,0==--u&&r(c)}catch(n){o(n)}}for(var n=0;n<c.length;n++)i(n,c[n])})},u.resolve=function(t){return t&&"object"==typeof t&&t.constructor===u?t:new u(function(n){n(t)})},u.reject=function(e){return new u(function(n,t){t(e)})},u.race=function(o){return new u(function(n,t){for(var e=0,r=o.length;e<r;e++)o[e].then(n,t)})},u._immediateFn="function"==typeof e?function(n){e(n)}:function(n){t(n,0)},u._unhandledRejectionFn=function(n){"undefined"!=typeof console&&console&&console.warn("Possible Unhandled Promise Rejection:",n)},u._setImmediateFn=function(n){u._immediateFn=n},u._setUnhandledRejectionFn=function(n){u._unhandledRejectionFn=n},void 0!==l&&l.exports?l.exports=u:n.Promise||(n.Promise=u)}(this)}).call(this,n("timers").setImmediate)},{timers:3}],3:[function(a,n,f){(function(n,t){var r=a("process/browser.js").nextTick,e=Function.prototype.apply,o=Array.prototype.slice,u={},i=0;function c(n,t){this._id=n,this._clearFn=t}f.setTimeout=function(){return new c(e.call(setTimeout,window,arguments),clearTimeout)},f.setInterval=function(){return new c(e.call(setInterval,window,arguments),clearInterval)},f.clearTimeout=f.clearInterval=function(n){n.close()},c.prototype.unref=c.prototype.ref=function(){},c.prototype.close=function(){this._clearFn.call(window,this._id)},f.enroll=function(n,t){clearTimeout(n._idleTimeoutId),n._idleTimeout=t},f.unenroll=function(n){clearTimeout(n._idleTimeoutId),n._idleTimeout=-1},f._unrefActive=f.active=function(n){clearTimeout(n._idleTimeoutId);var t=n._idleTimeout;0<=t&&(n._idleTimeoutId=setTimeout(function(){n._onTimeout&&n._onTimeout()},t))},f.setImmediate="function"==typeof n?n:function(n){var t=i++,e=!(arguments.length<2)&&o.call(arguments,1);return u[t]=!0,r(function(){u[t]&&(e?n.apply(null,e):n.call(null),f.clearImmediate(t))}),t},f.clearImmediate="function"==typeof t?t:function(n){delete u[n]}}).call(this,a("timers").setImmediate,a("timers").clearImmediate)},{"process/browser.js":1,timers:3}],4:[function(n,t,e){var r=n("promise-polyfill"),o="undefined"!=typeof window?window:Function("return this;")();t.exports={boltExport:o.Promise||r}},{"promise-polyfill":2}]},{},[4])(4)});var qn,Jn,Vn=Bn.exports.boltExport,Hn=function(n){var e=E.none(),t=[],r=function(n){o()?i(n):t.push(n)},o=function(){return e.isSome()},u=function(n){W(n,i)},i=function(t){e.each(function(n){d.setTimeout(function(){t(n)},0)})};return n(function(n){e=E.some(n),u(t),t=[]}),{get:r,map:function(e){return Hn(function(t){r(function(n){t(e(n))})})},isReady:o}},Wn={nu:Hn,pure:function(t){return Hn(function(n){n(t)})}},zn=function(n){d.setTimeout(function(){throw n},0)},$n=function(e){var n=function(n){e().then(n,zn)};return{map:function(n){return $n(function(){return e().then(n)})},bind:function(t){return $n(function(){return e().then(function(n){return t(n).toPromise()})})},anonBind:function(n){return $n(function(){return e().then(function(){return n.toPromise()})})},toLazy:function(){return Wn.nu(n)},toCached:function(){var n=null;return $n(function(){return null===n&&(n=e()),n})},toPromise:e,get:n}},Yn=function(n){return $n(function(){return new Vn(n)})},Kn=function(n){return $n(function(){return Vn.resolve(n)})},Xn=function(u){return Mn(Mn({},u),{toCached:function(){return Xn(u.toCached())},bindFuture:function(t){return Xn(u.bind(function(n){return n.fold(function(n){return Kn(X.error(n))},function(n){return t(n)})}))},bindResult:function(t){return Xn(u.map(function(n){return n.bind(t)}))},mapResult:function(t){return Xn(u.map(function(n){return n.map(t)}))},mapError:function(t){return Xn(u.map(function(n){return n.mapError(t)}))},foldResult:function(t,e){return u.map(function(n){return n.fold(t,e)})},withTimeout:function(n,o){return Xn(Yn(function(t){var e=!1,r=d.setTimeout(function(){e=!0,t(X.error(o()))},n);u.get(function(n){e||(d.clearTimeout(r),t(n))})}))}})},Gn=function(n){return Xn(Yn(n))},Qn=function(n){return Xn(Kn(X.value(n)))},Zn={nu:Gn,wrap:Xn,pure:Qn,value:Qn,error:function(n){return Xn(Kn(X.error(n)))},fromResult:function(n){return Xn(Kn(n))},fromFuture:function(n){return Xn(n.map(X.value))},fromPromise:function(n){return Gn(function(t){n.then(function(n){t(X.value(n))},function(n){t(X.error(n))})})}},nt=function(){return(new Date).getTime()};(Jn=qn||(qn={})).JSON="json",Jn.Blob="blob",Jn.Text="text",Jn.FormData="formdata",Jn.MultipartFormData="multipart/form-data";void 0!==d.window?d.window:Function("return this;")();var tt,et,rt,ot,ut,it,ct=function(n){try{var t=JSON.parse(n);return X.value(t)}catch(n){return X.error("Response was not JSON.")}},at=function(t){return Yn(function(e){var n=new d.FileReader;n.onload=function(n){var t=n.target?n.target.result:new d.Blob([]);e(t)},n.readAsText(t)})},ft=function(n){return Kn(n.response)},st=function(n,t){switch(n){case qn.JSON:return ct(t.response).fold(function(){return ft(t)},Kn);case qn.Blob:return e=t,E.from(e.response).map(at).getOr(Kn("no response content"));case qn.Text:default:return ft(t)}var e},lt=function(n){var t,e=(t=n.body,E.from(t).bind(function(n){switch(n.type){case qn.JSON:return E.some("application/json");case qn.FormData:return E.some("application/x-www-form-urlencoded; charset=UTF-8");case qn.MultipartFormData:return E.none();case qn.Text:default:return E.some("text/plain")}})),r=!0===n.credentials?E.some(!0):E.none(),o=function(n){switch(n){case qn.Blob:return"application/octet-stream";case qn.JSON:return"application/json, text/javascript";case qn.Text:return"text/plain";default:return""}}(n.responseType)+", */*; q=0.01",u=void 0!==n.headers?n.headers:{};return{contentType:e,responseType:function(n){switch(n){case qn.JSON:return E.none();case qn.Blob:return E.some("blob");case qn.Text:return E.some("text");default:return E.none()}}(n.responseType),credentials:r,accept:o,headers:u,progress:U(n.progress)?E.some(n.progress):E.none()}},dt=function(n){var e=new d.FormData;return R(n,function(n,t){e.append(t,n)}),e},pt=function(a){return Zn.nu(function(o){var u,i=new d.XMLHttpRequest;i.open(a.method,(u=a.url,E.from(a.query).map(function(n){var t,e=C(n,function(n,t){return encodeURIComponent(t)+"="+encodeURIComponent(n)}),r=(t="?",-1!==u.indexOf(t)?"&":"?");return 0<e.length?u+r+e.join("&"):u}).getOr(u)),!0);var e,n,t=lt(a);e=i,(n=t).contentType.each(function(n){return e.setRequestHeader("Content-Type",n)}),e.setRequestHeader("Accept",n.accept),n.credentials.each(function(n){return e.withCredentials=n}),n.responseType.each(function(n){return e.responseType=n}),n.progress.each(function(t){return e.upload.addEventListener("progress",function(n){return t(n.loaded,n.total)})}),R(n.headers,function(n,t){return e.setRequestHeader(t,n)});var r,c=function(){var t,n,e;(t=a.url,n=a.responseType,e=i,st(n,e).map(function(n){return{message:0===e.status?"Unknown HTTP error (possible cross-domain request)":"Could not load url "+t+": "+e.statusText,status:e.status,responseText:n}})).get(function(n){return o(X.error(n))})};i.onerror=c,i.onload=function(){var n,t,e,r;0===i.status&&(n=a.url,t=n,r=0,""!=(e="file:")&&(t.length<e.length||t.substr(r,r+e.length)!==e))?c():i.status<100||400<=i.status?c():function(n,t){var e=function(){return Zn.pure(t.response)},r=function(n){return Zn.error({message:n,status:t.status,responseText:t.responseText})};switch(n){case qn.JSON:return ct(t.response).fold(r,Zn.pure);case qn.Blob:case qn.Text:return e();default:return r("unknown data type")}}(a.responseType,i).get(o)},(r=a.body,E.from(r).map(function(n){return n.type===qn.JSON?JSON.stringify(n.data):n.type===qn.FormData?dt(n.data):n.type===qn.MultipartFormData?dt(n.data):n})).fold(function(){return i.send()},function(n){i.send(n)})})},mt=function(){return n="",{type:qn.Text,data:n};var n},ht=function(n,t){var e=-1===n.indexOf("?")?"?":"&";return t?n+e+"apiKey="+encodeURIComponent(t):n},vt=function(n){return I(n,"tiny-api-key").orThunk(function(){return I(n,"tinymce-api-key")}).orThunk(function(){return I(n,"textbox-api-key")}).getOrUndefined()},gt=function(n){return n.fold(function(n){var t=n.responseText,e=N(t)?t:n.message;return X.error(e)},X.value)},yt=function(i,c){var a=vt(c);return{execute:function(n){var o,t,e=S(n,function(n){return M(n)?String(n):n}),r=ht((o=e,i.replace(/\$\{([^{}]*)\}/g,function(n,t){var e,r=o[t];return"string"==(e=typeof r)||"number"===e?r.toString():n})),a),u=(t={url:r,responseType:qn.JSON,credentials:!0,headers:c},pt(Mn(Mn({},t),{method:"get",body:mt()}))).map(gt);return Zn.wrap(u)}}},wt=function(o,u){var i=vt(u);return{execute:function(n){var t,e,r=(t={url:ht(o,i),body:(e=n,{type:qn.JSON,data:e}),responseType:qn.JSON,credentials:!0,headers:u},pt(Mn(Mn({},t),{method:"post"}))).map(gt);return Zn.wrap(r)}}},kt=function(t,o,n,u,e){return!0===e?{known:{},unknown:n}:z(n,function(e,n){var r=u(n);return t(o,r).fold(function(){return{known:e.known,unknown:e.unknown.concat([n])}},function(n){var t=Tn(r,n);return{known:Mn(Mn({},e.known),t),unknown:e.unknown}})},{known:{},unknown:[]})},Tt=function(n,t,e,r,o,u){var i,c,a,f,s,l=kt(t.get,o,e,r,u);return 0===l.unknown.length?Zn.value(l.known):(i=n,c=t,a=l.known,f=l.unknown,s=o,i(f,u).mapResult(function(n){return R(n,function(n,t){c.set(t,n,s)}),Mn(Mn({},a),n)}))},bt=function(n){return Pn(n,n,kn(),Cn())},xt=function(n,t){return Pn(n,n,(e=t,wn.defaultedThunk(g(e))),Cn());var e},Ot="iframely",_t="oembed",Et="fallback",jt="wikipedia",At=function(n){return"["+n.join(", ")+"]"},Rt=[Ot,_t,Et],St=function(t,n,e){return function(n,t){for(var e=0,r=n.length;e<r;e++)if(t(n[e],e))return!0;return!1}(n,function(n){return V(t,n)})?X.error("Embed response source: "+At(t)+" contains more than one of "+At(Rt)):X.value(e)},Ft=(Fn([bt("url"),bt("maxWidth"),xt("fresh",!1)]),Fn([bt("status_code"),bt("sub_code"),bt("msg")]),Fn([bt("html"),(tt="rels",et=[Pn("source","source",kn(),(rt=function(n){return L(n)?V(t=n,Ot)?St(t,[_t,Et,jt],Ot):V(t,_t)?St(t,[Ot,Et,jt],_t):V(t,Et)?St(t,[Ot,_t,jt],Et):V(t,jt)?St(t,[Ot,_t,Et],jt):X.error("Embed response source: "+At(t)+" did not contain any of: "+At(Rt)):X.error("Sources was not an array: "+n);var t},Sn(function(n){return rt(n).fold(cn,on)})))],Pn(tt,tt,kn(),Fn(et)))]),[bt("url"),xt("fresh",!1)]),Ct=Fn(Ft),It=Fn([Pn("urls","urls",kn(),(ot=Ft,In(ot)))]),Pt=mn([{invalid:["invalidUrl"]},{unknown:["unknownUrl"]},{valid:["validUrl"]}]),Dt=function(n,t,e,r){return n.fold(t,e,r)},Nt=function(n,t,e){var a=function(n,e){void 0===e&&(e=36e5);var t,r,o={},u=function(n,t,e){o[n]={result:t,timestamp:e}},i=function(n,t){return n-t<e};return N(n)&&(t=n,r=nt(),R(t,function(n,t){i(r,n.timestamp)&&u(t,n.result,n.timestamp)})),{set:u,get:function(t,n){return E.from(o[n]).filter(function(n){return i(t,n.timestamp)}).map(function(n){return n.result})},dump:function(){return o}}}(e),f=yt(n+"/1/check?url=${url}&fresh=${fresh}",t),r=wt(n+"/1/check",t),s=function(n){return{url:n.url,result:(t=n.url,e=n.result,"VALID"===e?Pt.valid(t):"INVALID"===e?Pt.invalid(t):Pt.unknown(t))};var t,e};return{checkOne:function(o,n){void 0===n&&(n=!1);var t,e,r,u,i,c=nt();return(t=function(n,t){var e={url:encodeURIComponent(o),fresh:t},r=Nn("ephox.link.service.one.ajax.service.get",Ct,e);return f.execute(r)},e=a,r=o,u=c,(!0===(i=n)?E.none():e.get(u,r)).fold(function(){return t(r,i).mapResult(function(n){return e.set(r,n,u),n})},function(n){return Zn.pure(n)})).mapResult(s)},checkMany:function(n,t){void 0===t&&(t=!1);var e=nt();return Tt(function(n,t){var e=Nn("ephox.link.service.many.ajax.service.post",It,{urls:n});return r.execute(e).mapResult(function(n){return bn(n.results,"url")})},a,n,function(n){return n.url},e,t).mapResult(function(n){return S(n,s)})},dumpCache:a.dump}},Lt=0,Mt=(Fn([bt("language"),bt("words")]),ut="good-spelling",it=(new Date).getTime(),Math.floor(1e9*Math.random()),++Lt,String(it),function(n){return n&&/^https?:\/\//.test(n)}),Ut=function(n){return 0===n.indexOf("mailto:")||"#"===n.charAt(0)},Bt=tinymce.DOM,qt=tinymce.util.Tools,Jt="data-mce-linkchecker-status",Vt="data-mce-linkchecker-focus",Ht=function(n){var t=Bt.select('a[href]:not([href=""])',n);return qt.map(t,function(n){return Bt.getAttrib(n,"href")})},Wt=function(n,t){Bt.setAttrib(n,Jt,t),Yt(n)&&Bt.setAttrib(n,"aria-invalid",!0)},zt=function(t,n){return qt.map(n,function(n){return{url:t(Bt.getAttrib(n,"href")),elm:n}})},$t=function(n,t){return qt.grep(n,function(n){return n.url===t})},Yt=function(n){return"invalid"===Bt.getAttrib(n,Jt)},Kt=function(n,t){return Bt.setAttrib(n,Vt,t?"true":null)},Xt=function(t){return function(n){qt.each(n,function(n){return n.attr(t,null)})}},Gt=function(c){return function(n){var t,e,r,o=n.trim(),u=!1===Mt(t=o)&&/^\w+:/.test(t)?o:c.documentBaseURI.toAbsolute(o),i=(0===u.indexOf("//")?d.location.protocol+u:u).replace(/ /g,"%20");return e=i,(r=d.document.createElement("a")).href=e,Mt(e)?r.href:e}},Qt=function(n){return function(){n.execCommand("mceLink")}},Zt=function(n,t){return function(){!function(n){if(!tinymce.Env.ie||10<tinymce.Env.ie){var t=d.document.createElement("a");t.target="_blank",t.href=n,t.rel="noreferrer noopener";var e=d.document.createEvent("MouseEvents");e.initMouseEvent("click",!0,!0,d.window,!0,0,0,0,0,!1,!1,!1,!1,0,null),t.dispatchEvent(e)}else{var r=d.window.open("","_blank");if(r){r.opener=null;var o=r.document;o.open(),o.write('<meta http-equiv="refresh" content="0; url='+tinymce.DOM.encode(n)+'">'),o.close()}}}(Gt(n)(tinymce.DOM.getAttrib(t,"href")))}},ne=function(n,t){return function(){n.undoManager.transact(function(){tinymce.DOM.remove(t,!0)})}},te=function(n,t){return function(){n.add(t.href),Wt(t,"ignored")}},ee=tinymce.DOM,re=function(n,t,e){var r,o,u,i,c,a,f,s=new tinymce.ui.Factory.create("menu",{items:[(r=n,r.plugins.link?{text:"Link",icon:"link",onclick:Qt(r)}:null),{text:"Open link",icon:"newtab",onclick:Zt(n,t)},{text:"Remove link",icon:"unlink",onclick:ne(n,t)},{text:"-"},{text:"Ignore",onclick:te(e,t)}],context:"contextmenu",onhide:function(){s.remove(),Kt(t,!1)}});s.renderTo(d.document.body),o=n,u=s,i=t,c=ee.getPos(o.getContentAreaContainer()),a=o.dom.getPos(i),"BODY"===(f=o.dom.getRoot()).nodeName?(a.x-=f.ownerDocument.documentElement.scrollLeft||f.scrollLeft,a.y-=f.ownerDocument.documentElement.scrollTop||f.scrollTop):(a.x-=f.scrollLeft,a.y-=f.scrollTop),c.x+=a.x,c.y+=a.y,u.moveTo(c.x,c.y+i.offsetHeight+1),Kt(t,!0)},oe=function(n,t){var e,r;n.on("contextmenu",(e=n,r=t,function(n){var t=e.dom.getParent(n.target,"a[href]");Yt(t)&&(n.preventDefault(),n.stopImmediatePropagation(),re(e,t,r))}),!0)},ue=function(n,t,e){return[{text:"Ignore",onAction:te(e,t)}]},ie=function(n,t,e){var r,o=function(n,t){for(var e=[],r=0,o=n.length;r<o;r++){var u=n[r];t(u,r)&&e.push(u)}return e}(n.getParam("contextmenu","").split(" "),function(n){return""!==n});if(0!==o.length&&-1===o.indexOf("link")){var u=[{text:"Remove link",icon:"unlink",onAction:ne(n,e)},{text:"Open link",icon:"new-tab",onAction:Zt(n,e)},{type:"separator"}];return(r=n,r.plugins.link?[{text:"Link...",icon:"link",onAction:Qt(r)}]:[]).concat(u).concat(ue(0,e,t))}return ue(0,e,t)},ce=tinymce.util.Tools,ae=function(n,t){return ce.grep(n,function(n){return!1===t.has(n)})},fe=function(t){return function(n){return Mt(n)===t}},se=function(n,t,o,e,u){var r=ce.grep(ce.map(Ht(u),o),fe(!0));n.checkMany(ae(r,t)).get(function(n){n.fold(e.logError,function(n){return t=u,e=n,r=zt(o,Bt.select("a[href]",t)),void qt.each(e,function(n,t){qt.each($t(r,t),function(t){Dt(n.result,function(n){Wt(t.elm,"invalid")},function(n){Wt(t.elm,"unknown")},function(n){Wt(t.elm,"valid")})})});var t,e,r})})},le=function(n,t,e,r,o){var u,i,c,a,f=ce.grep(ce.map(Ht(o),e),fe(!1)),s=ae((u=f,ce.grep(u,function(n){return!1===Ut(n)})),t);i=o,c=s,a=zt(e,Bt.select("a[href]",i)),qt.each(c,function(n){qt.each($t(a,n),function(n){Wt(n.elm,"unknown")})})},de=function(n,t,e,r,o){var u=o.getBody();se(n,t,e,r,u),le(0,t,e,0,u)},pe=function(n,t,e,r,o,u,i){var c,a,f,s,l=b(de,500);(c=n.serializer).addTempAttr(Jt),c.addTempAttr(Vt),c.addAttributeFilter(Jt,Xt(Jt)),c.addAttributeFilter(Vt,Xt(Jt)),n.dom.loadCSS((a=u,n.getParam("linkchecker_content_css")||a+"/content.min.css")),n.on("change setContent undo redo",function(){l(r,t,e,o,n,i)}),de(r,t,e,o,n),i?(s=t,(f=n).ui.registry.addContextMenu("linkchecker",{update:function(n){var t=f.dom.getParent(n,"a[href]");return Yt(t)?ie(f,s,t):[]}})):oe(n,t)},me=function(n,t){return function(){return{status:n,message:t}}},he=me("invalid","URL does not seem to be valid"),ve=me("none",""),ge=me("valid","The URL seems to be valid"),ye=function(n,r,t){var e,o=b((e=t,function(n,t){e.checkOne(n).get(function(n){n.fold(function(){t({status:"none",message:""})},function(n){Dt(n.result,function(n){t(he())},function(n){t(ve())},function(n){t(ge())})})})}),500);return function(n,t){var e=r(n.url);0===n.url.length||!Mt(e)&&Ut(e)?t(ge()):Mt(e)?o(e,t):t(ve())}},we=function(n,t,e){var u,i=(u=t,z(n,function(n,t){var e,r=Mn(Mn({},u({url:t})),{origUrl:t}),o=r.url;return Mn(Mn({},n),((e={})[o]=P(n,o)?n[o].concat([r]):[r],e))},{}));return e(H(C(i,function(n){return n}),function(n){return n[0]})).mapResult(function(n){return r=i,o={},R(n,function(t,n){var e=r[n];W(e,function(n){o[n.origUrl]=t})}),o;var r,o})},ke=function(t){var n,e,r,o,u=(n=T(t),o=(r=t).getParam("api_key"),e=o||r.getParam("linkchecker_api_key"),Nt(n,e?{"tinymce-api-key":e}:{})),i=function(n){return t.getParam("linkchecker_preprocess",y,"function")(n)};return{checkOne:function(n){var t=i({url:n});return u.checkOne(t.url)},checkMany:function(n){return we(n,i,function(n){return u.checkMany(n)})}}},Te=function(){var s,l=function(){void 0!==s&&(s.parentNode.removeChild(s),s=void 0)};return{add:function(n,t){l();var e,r,o=be(n,t);e="This link seems to be invalid.",(r=d.document.createElement("div")).className="mce-widget mce-tooltip mce-tooltip-s",r.setAttribute("role","presentation"),r.innerHTML='<div class="mce-tooltip-arrow"></div><div style="white-space:pre;" class="mce-tooltip-inner">'+e+"</div>",s=r,d.document.body.appendChild(s);var u=s.getBoundingClientRect(),i=n.getBody().getBoundingClientRect(),c=o.top-u.height/2,a=o.center-u.width/2;a<=0?(s.className="mce-widget mce-tooltip mce-tooltip-sw",a=o.center):o.center+u.width/2-20>i.width&&(s.className="mce-widget mce-tooltip mce-tooltip-se",a=o.center-u.width);var f="position:absolute;top:"+c+"px;left:"+a+"px;";s.setAttribute("style",f)},remove:l}},be=function(n,t){var e=t.getBoundingClientRect(),r=n.inline?{top:0,left:0}:n.getContentAreaContainer().getBoundingClientRect(),o=n.dom.getViewPort();return{top:e.top+r.top+o.y-e.height,center:e.left+r.left+o.x+e.width/2}},xe=function(a){var f=Te();a.on("mouseover mouseout",function(n){var t,e,r,o,u,i=n.target,c="mouseover"===n.type;t=f,r=i,o=c,u=(e=a).dom.getParent(r,"a[href]"),Yt(u)&&!0===o?t.add(e,u):t.remove()}),a.on("remove",function(){f.remove()})},Oe=function(r,o){if(m(tinymce,"4.4.3"))return h.error('The "linkchecker" plugin requires at least 4.4.3 version of TinyMCE.'),function(){};var t,u,i,c=!m(tinymce,"5.0.0"),n=p(0),a=ke(r),f=(t={},{add:function(n){t[n]=!0},has:function(n){return n in t}}),s=Gt(r),l=(u=r,i=n,{logError:function(n){var t,e,r="string"==typeof(t=n)?{message:t}:t;e=r,u.fire("LinkCheckerError",e),i.set(i.get()+1),i.get()<5&&!u.removed&&d.console.error("Link checker error: "+r.message)}});return r.on("SkinLoaded",function(){var n,t,e;T(r)?(pe(r,f,s,a,l,o,c),t=s,e=a,"filepicker_validator_handler"in(n=r).settings==0&&(n.settings.filepicker_validator_handler=ye(0,t,e))):l.logError("You need to specify the linkchecker_service_url setting")}),c||xe(r),{}};tinymce.PluginManager.add("linkchecker",Oe)}(window);